<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#050505" />
    <meta name="description" content="A resource management survival novel game simulating the hellish exam week of engineering students.">
    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/svg+xml" href="./icon.svg">
    <title>Hello World, Good bye Unit</title>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.556.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.31.0",
    "immer": "https://aistudiocdn.com/immer@^11.0.1",
    "path": "https://aistudiocdn.com/path@^0.12.7",
    "url": "https://aistudiocdn.com/url@^0.11.4",
    "vite": "https://aistudiocdn.com/vite@^7.2.6",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1",
    "fs": "https://aistudiocdn.com/fs@^0.0.1-security",
    "zustand": "https://aistudiocdn.com/zustand@^5.0.9",
    "zustand/": "https://aistudiocdn.com/zustand@^5.0.9/"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="./index.tsx"></script>
    <script>
      // Global Error Handler for startup debugging
      window.addEventListener('error', function(event) {
        const root = document.getElementById('root');
        // Only show if root is empty (app hasn't mounted)
        if (root && root.innerHTML === '') {
           const errDiv = document.createElement('div');
           Object.assign(errDiv.style, {
             color: '#ef4444',
             backgroundColor: '#000',
             padding: '20px',
             fontFamily: 'monospace',
             whiteSpace: 'pre-wrap',
             position: 'fixed',
             top: '0',
             left: '0',
             width: '100%',
             height: '100%',
             zIndex: '9999',
             overflow: 'auto'
           });
           errDiv.innerText = 'CRITICAL STARTUP ERROR:\n' + event.message + '\n\n' + (event.error ? event.error.stack : '');
           document.body.appendChild(errDiv);
        }
      });

      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('./sw.js')
            .then(reg => console.log('Service Worker Registered!', reg.scope))
            .catch(err => console.log('Service Worker Registration Failed:', err));
        });
      }
    </script>
  </body>
</html>